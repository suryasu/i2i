YUI.add("hermes-template-dynamic-page-head",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'<meta name="title" content="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'" data-dynamic="true">'},3:function(e,t,n,r,i){var s;return'<meta property="og:url" content="'+e.escapeExpression((s=(s=n.fullURL||(t!=null?t.fullURL:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"fullURL",hash:{},data:i}):s))+'" data-dynamic="true">'},5:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'	<meta property="og:image" content="'+f((s=(s=n.openGraphImageURL||(t!=null?t.openGraphImageURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphImageURL",hash:{},data:i}):s))+'" data-dynamic="true">\n	<meta property="og:image:width" content="'+f((s=(s=n.openGraphaImageWidth||(t!=null?t.openGraphaImageWidth:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphaImageWidth",hash:{},data:i}):s))+'" data-dynamic="true">\n	<meta property="og:image:height" content="'+f((s=(s=n.openGraphaImageHeight||(t!=null?t.openGraphaImageHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphaImageHeight",hash:{},data:i}):s))+'" data-dynamic="true">\n'},7:function(e,t,n,r,i){return'	<link rel="openid2.provider" href="https://open.login.yahooapis.com/openid/op/auth" data-dynamic="true"/>\n'},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<meta property="flickr_photos:'+f((s=(s=n.byPrefix||(t!=null?t.byPrefix:t))!=null?s:u,typeof s===a?s.call(o,{name:"byPrefix",hash:{},data:i}):s))+'by" content="'+f((s=(s=n.domain||(t!=null?t.domain:t))!=null?s:u,typeof s===a?s.call(o,{name:"domain",hash:{},data:i}):s))+f((s=(s=n.ownerURL||(t!=null?t.ownerURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"ownerURL",hash:{},data:i}):s))+'" data-dynamic="true">'},11:function(e,t,n,r,i){var s;return'<meta property="al:ios:url" content="flickr://flickr.com'+e.escapeExpression((s=(s=n.url||(t!=null?t.url:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"url",hash:{},data:i}):s))+'" data-dynamic="true">'},13:function(e,t,n,r,i){var s;return'<meta property="twitter:app:url:iphone" content="flickr://flickr.com'+e.escapeExpression((s=(s=n.url||(t!=null?t.url:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"url",hash:{},data:i}):s))+'" data-dynamic="true">'},15:function(e,t,n,r,i){var s;return(s=n.each.call(t!=null?t:{},t!=null?t.twitterImages:t,{name:"each",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:""},16:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<meta property="'+f((s=(s=n.property||(t!=null?t.property:t))!=null?s:u,typeof s===a?s.call(o,{name:"property",hash:{},data:i}):s))+'" content="https:'+f((s=(s=n.content||(t!=null?t.content:t))!=null?s:u,typeof s===a?s.call(o,{name:"content",hash:{},data:i}):s))+'" data-dynamic="true">\n'},18:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'	<link rel="alternate" type="application/atom+xml" '+((s=n["if"].call(u,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+' href="'+e.escapeExpression((o=(o=n.url||(t!=null?t.url:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"url",hash:{},data:i}):o))+'" data-dynamic="true">\n'},19:function(e,t,n,r,i){var s;return'title="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression,l="function";return'<meta name="description" content="'+f((n.stripTags||t&&t.stripTags||a).call(u,t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">\n'+((s=n["if"].call(u,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n<meta property="og:type" content="flickr_photos:'+f((o=(o=n.flickrType||(t!=null?t.flickrType:t))!=null?o:a,typeof o===l?o.call(u,{name:"flickrType",hash:{},data:i}):o))+'" data-dynamic="true">\n<meta property="og:title" content="'+f((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===l?o.call(u,{name:"title",hash:{},data:i}):o))+'" data-dynamic="true">\n<meta property="og:description" content="'+f((n.stripTags||t&&t.stripTags||a).call(u,t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">\n'+((s=n["if"].call(u,t!=null?t.fullURL:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(u,t!=null?t.openGraphImageURL:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.openId:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.ownerURL:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(u,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n<meta property="twitter:card" content="'+f((o=(o=n.twitterCardType||(t!=null?t.twitterCardType:t))!=null?o:a,typeof o===l?o.call(u,{name:"twitterCardType",hash:{},data:i}):o))+'" data-dynamic="true">\n<meta property="twitter:description" content="'+f((n.stripTags||t&&t.stripTags||a).call(u,t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">\n'+((s=n["if"].call(u,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(u,t!=null?t.twitterImages:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n.each.call(u,t!=null?t.feeds:t,{name:"each",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=
null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dynamic-page-head",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-meta",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'name="'},3:function(e,t,n,r,i){return'property="'},5:function(e,t,n,r,i){return'description="'+e.escapeExpression(e.lambda(t,t))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u,a=t!=null?t:{},f=n.helperMissing,l="function",c=e.escapeExpression,h="<meta "+((s=n["if"].call(a,t!=null?t.isName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+c((o=(o=n.metaName||(t!=null?t.metaName:t))!=null?o:f,typeof o===l?o.call(a,{name:"metaName",hash:{},data:i}):o))+'" content="'+c((n.renderMetaInfo||t&&t.renderMetaInfo||f).call(a,t!=null?t.metaValue:t,{name:"renderMetaInfo",hash:{},data:i}))+'" ';return s=(o=(o=n.metaDescription||(t!=null?t.metaDescription:t))!=null?o:f,u={name:"metaDescription",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i},typeof o===l?o.call(a,u):o),n.metaDescription||(s=n.blockHelperMissing.call(t,s,u)),s!=null&&(h+=s),h+' data-dynamic="true">\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-meta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-link",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'id="'+e.escapeExpression((s=(s=n.id||(t!=null?t.id:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"id",hash:{},data:i}):s))+'"'},3:function(e,t,n,r,i){var s;return'rev="'+e.escapeExpression((s=(s=n.rev||(t!=null?t.rev:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"rev",hash:{},data:i}):s))+'"'},5:function(e,t,n,r,i){var s;return'rel="'+e.escapeExpression((s=(s=n.rel||(t!=null?t.rel:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"rel",hash:{},data:i}):s))+'"'},7:function(e,t,n,r,i){var s;return'type="'+e.escapeExpression((s=(s=n.type||(t!=null?t.type:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"type",hash:{},data:i}):s))+'"'},9:function(e,t,n,r,i){var s;return'media="'+e.escapeExpression((s=(s=n.media||(t!=null?t.media:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"media",hash:{},data:i}):s))+'"'},11:function(e,t,n,r,i){var s;return'href="'+e.escapeExpression((s=(s=n.href||(t!=null?t.href:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"href",hash:{},data:i}):s))+'"'},13:function(e,t,n,r,i){return'data-dynamic-added-by="'+e.escapeExpression((n.obfuscateInternals||t&&t.obfuscateInternals||n.helperMissing).call(t!=null?t:{},t!=null?t.addedBy:t,{name:"obfuscateInternals",hash:{},data:i}))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return"<link "+((s=n["if"].call(o,t!=null?t.id:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.rev:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.rel:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.type:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.media:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.href:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t.addedBy:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+' data-dynamic="true" />'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-link",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-album-toolbar",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'		<a class="edit-in-organizr" href="/photos/organize/?start_tab=one_set'+a((s=(s=n.setId||(t!=null?t.setId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"setId",hash:{},data:i}):s))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"album-page.EDIT_IN_ORGANIZR"},data:i}))+"</a>\n"},3:function(e,t,n,r,i){return" selected"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="album-toolbar-content">\n	<a class="back-to-albums" href="/photos/'+l((o=(o=n.nsidOrPathAlias||(t!=null?t.nsidOrPathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"nsidOrPathAlias",hash:{},data:i}):o))+"/albums/with/"+l((o=(o=n.setId||(t!=null?t.setId:t))!=null?o:a,typeof o===f?o.call(u,{name:"setId",hash:{},data:i}):o))+'">\n		<span class="back-to-albums-icon"></span>\n		<span class="back-to-albums-text">\n			'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"album-page.BACK_TO_ALBUMS"},data:i}))+"\n		</span>\n	</a>\n"+((s=n["if"].call(u,t!=null?t.viewerIsOwner:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["fluid-magic-slideshow-view"]:t,{name:"outlet",hash:{},data:i}))+'\n	<button data-layout="justified" class="layout justified'+((s=n["if"].call(u,t!=null?t.isJustifiedLayout:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></button>\n	<button data-layout="story" class="layout story'+((s=n["if"].call(u,t!=null?t.isStoryLayout:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></button>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-toolbar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-magic-slideshow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" disabled"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<a href="#" class="slideshow-toggle'+((s=n.unless.call(o,t!=null?t.isEnabled:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TOGGLE_SLIDESHOW"},data:i}))+'"><span></span></a>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-magic-slideshow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-slideshow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" no-click"},3:function(e,t,n,r,i){return" is-hidden"},5:function(e,t,n,r,i){return" is-video"},7:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n["prev-url"]||(t!=null?t["prev-url"]:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"prev-url",hash:{},data:i}):s))},9:function(e,t,n,r,i){return"#"},11:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n["next-url"]||(t!=null?t["next-url"]:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"next-url",hash:{},data:i}):s))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["photo-well-view"]:t,{name:"outlet",hash:{},data:i}))+'\n<a class="playpause chrome" data-track="playpauseClick"><span class="pause-button"></span><span class="play-button"></span><div class="timer"></div></a>\n\n<a class="navigate-target chrome navigate-prev'+((s=n["if"].call(o,t!=null?t["prev-is-not-clickable"]:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-hidden"]:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-video"]:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" href="'+((s=n["if"].call(o,t!=null?t["prev-url"]:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'" data-track="prevPhotoButtonClick" data-direction="prev"><span class="navigate-target-arrow"></span></a>\n\n<a class="navigate-target chrome navigate-next'+((s=n["if"].call(o,t!=null?t["next-is-not-clickable"]:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-hidden"]:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-video"]:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" href="'+((s=n["if"].call(o,t!=null?t["next-url"]:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'" data-track="nextPhotoButtonClick" data-direction="next"><span class="navigate-target-arrow"></span></a>\n\n<a class="close chrome" data-track="closeClick"><span></span></a>\n'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["slideshow-attribution-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/slideshow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-attribution",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'	<a class="avatar person medium no-menu" data-person-nsid="'+f((s=(s=n.nsid||(t!=null?t.nsid:t))!=null?s:u,typeof s===a?s.call(o,{name:"nsid",hash:{},data:i}):s))+'" style="background-image: url('+f((s=(s=n.buddyicon||(t!=null?t.buddyicon:t))!=null?s:u,typeof s===a?s.call(o,{name:"buddyicon",hash:{},data:i}):s))+');" href="/photos/'+f((s=(s=n.pathAlias||(t!=null?t.pathAlias:t))!=null?s:u,typeof s===a?s.call(o,{name:"pathAlias",hash:{},data:i}):s))+'/"></a>\n'},3:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'	<div class="avatar person medium" data-person-nsid="'+f((s=(s=n.nsid||(t!=null?t.nsid:t))!=null?s:u,typeof s===a?s.call(o,{name:"nsid",hash:{},data:i}):s))+'" style="background-image: url('+f((s=(s=n.buddyicon||(t!=null?t.buddyicon:t))!=null?s:u,typeof s===a?s.call(o,{name:"buddyicon",hash:{},data:i}):s))+');"></div>\n'},5:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:""},6:function(e,t,n,r,i){return'		<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>\n'},8:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:""},9:function(e,t,n,r,i){return'			<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return((s=n["if"].call(u,t!=null?t.noMenu:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"\n"+((s=n.unless.call(u,t!=null?t.isAlbumView:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n<div class="attribution-info">\n\n	<a href="/photos/'+l((o=(o=n.pathAlias||(t!=null?t.pathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"pathAlias",hash:{},data:i}):o))+'/" class="owner-name truncate" title="'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"attribution.GO_TO_PHOTOSTREAM"},data:i}))+'" data-track="attributionNameClick">'+l((o=(o=n.displayname||(t!=null?t.displayname:t))!=null?o:a,typeof o===f?o.call(u,{name:"displayname",hash:{},data:i}):o))+'</a>\n	<a href="/photos/'+l((o=(o=n.pathAlias||(t!=null?t.pathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"pathAlias",hash:{},data:i}):o))+'/" class="owner-name-with-by truncate" title="'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"attribution.GO_TO_PHOTOSTREAM"},data:i}))+'" data-track="attributionNameClick">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{user:t!=null?t.displayname:t,intlName:"attribution.BY_USER"},data:i}))+"</a>\n\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["follow-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,t!=null?t.isAlbumView:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/attribution",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("slideshow-attribution-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",e.isActiveViewAgnostic);var t=e.collection.getList()[e.position];return t&&(this.nsid=e.nsid=t.getValue("owner").getValue("nsid")),this.realFullscreen=!0,this},langBundles:this.details.langBundles,subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,isActiveViewAgnostic:!0,isFluid:!0,isOnDark:!0}},loadState:function(){var e=this;if(this.nsid)return this.appContext.getModel("person-models",this.nsid).then(function(t){e.set("owner",t)});throw new Error("missing nsid")},buildContainer:function(){var e=this.get("owner"),t=this.appContext.getViewer().nsid,n=e.getValue("pathAlias")||e.getValue("nsid"),r;return r=e.getValue("buddyicon").large?e.getValue("buddyicon").large:e.getValue("buddyicon")["default"],this.setContainerWithTemplate("attribution",{pathAlias:n,buddyicon:r,nsid:e.getValue("nsid"),noMenu:!0,displayname:e.getValue("displayname"),follow:this.subviews["follow-view"]?this.subviews["follow-view"].get("container"):"",realFullscreenEnabled:this.realFullscreen&&this.appContext.experiments.fullscreen.getMode()}),t===e.getValue("nsid")&&this.get("container").addClass("is-self"),this},activate:function(){return this.registerEventHandler(e.on("personMenuOpen",this.handlePersonMenuOpen.bind(this))),this.registerEventHandler(e.on("personMenuClose",this.handlePersonMenuClose.bind(this))),this},handlePersonMenuOpen:function(e){this.fire("subviewViewEvent","personMenuOpen")},handlePersonMenuClose:function(e){this.fire("subviewViewEvent","personMenuClose")},onParentViewEvent:function(e,t){var r,i=this,s;t&&t[0]&&(r=t[0],r==="slideshowView:newPhoto"?t[1]&&(s=t[1].getValue("owner").getValue("nsid"),s!==this.nsid&&(this.nsid=s,this.set("owner",t[1].getValue("owner")),this.subviews["follow-view"]&&this.subviews["follow-view"].destroy({remove:!0}),this.instantiateSubview("follow-view",{nsid:s,realFullscreen:!0,isActiveViewAgnostic:!0,isFluid:!0,isOnDark:!0}).then(function(e){return e.initialize()}).then(function(e){i.buildContainer(),i.get("container").one(".follow-view").addClass("is-real-fullscreen photo-attribution"),e.normalizedActivate()}).catch(function(e){n.error("Error loading follow-view",{err:e})}))):r==="slideshowView:preloadPhoto"&&(s=t[1].getValue("owner").getValue("nsid"),s!==this.nsid&&i.appContext.getModel("person-relationship-models",{id:s})))}})},"@VERSION@",{requires:["flickr-view","hermes-template-attribution"],optional:["person-models"],langBundles:["attribution"]});
YUI.add("hermes-lang-attribution",function(e,t){e.Intl.add("hermes/attribution","en-US",{FOLLOW:["Follow"],FOLLOWING:["Following"],ERROR_SETTING_FRIEND:["There was a problem setting your friend relationship"],ERROR_SETTING_FAMILY:["There was a ",{type:"number",valueName:"POPULATION",format:"integer"}," problem setting your family relationship"],FRIEND:["Friend"],FAMILY:["Family"],UNFOLLOW:["Unfollow"],GO_TO_PHOTOSTREAM:["Go to ","${name}","'s photostream"],BY_USER:["By: ","${user}"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{};return'	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:i}))+"</h2>\n"+((s=n["if"].call(o,t!=null?t.isSignedIn:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+"		</div>\n	</div>\n"},2:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"				<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:i}))+"<br />"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:i}))+"</p>\n\n"+((s=n.unless.call(o,t!=null?t.isMinor:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")},3:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"					<p><button class='ui-button'><span>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:i}))+"</span></button></p>\n					<p>"+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:i}))+"</p>\n"},5:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"				<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:i}))+' <a href="//'+a((s=(s=n.host||(t!=null?t.host:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"host",hash:{},data:i}):s))+'/signin/" data-track="photoWellSignInClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a></p>\n"},7:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isVideo:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'		<div class="videoplayer main-photo" style="width:'+l((o=(o=n.width||(t!=null?t.width:t))!=null?o:a,typeof o===f?o.call(u,{name:"width",hash:{},data:i}):o))+"px; height:"+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+'px;">'+((s=n["if"].call(u,t!=null?t.isHTML5Video:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},9:function(e,t,n,r,i){var s;return'<video id="video_1" poster="'+e.escapeExpression((s=(s=n.src||(t!=null?t.src:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"src",hash:{},data:i}):s))+'" class="video-js vjs-big-play-centered"></video>'},11:function(e,t,n,r,i){var s;return"\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.showFuzzy:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:"")},12:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<span class="restricted-image main-photo" style="width:'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+"px;height:"+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'px;">\n		</span>\n'},14:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<span class="facade-of-protection-neue" style="width:'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+"px;height:"+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'px;">\n			'+f((n.outlet||t&&t.outlet||u).call(o,t!=null?t["zoom-view"]:t,{name:"outlet",hash:{},data:i}))+"\n			"+f((n.outlet||t&&t.outlet||u).call(o,t!=null?t["vr-overlay-view"]:t,{name:"outlet",hash:{},data:i}))+'\n		</span>\n\n		<img width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.src||(t!=null?t.src:t))!=null?s:u,typeof s===a?s.call(o,{name:"src",hash:{},data:i}):s))+'" class="low-res-photo" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		<img width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.highResSrc||(t!=null?t.highResSrc:t))!=null?s:u,typeof s===a?s.call(o,{name:"highResSrc",hash:{},data:i}):s))+'" class="main-photo is-hidden" onload="registerFirstPhoto(this)" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		<noscript>\n			<img width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.highResSrc||(t!=null?t.highResSrc:t))!=null?s:u,typeof s===a?s.call(o,{name:"highResSrc",hash:{},data:i}):s))+'" class="main-photo" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		</noscript>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.needsInterstitial:t,{name:"if",hash
:{},fn:e.program(1,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("slideshow-well-view",function(e,t){var n=require("lib/flog")(t),r=500,i=500;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t=e.collection.getList()[e.position];if(!t)throw new Error("missing photo");return this.set("photo",t),this.set("isActiveViewAgnostic",!0),this.set("canvasSizeIsDirty",!0),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},buildContainer:function(){var e=this,t=this.get("photo"),r,i;return e.preloadImage&&(e.preloadImage.onload=null),this.appContext.forceServerRender?(r=this.getPhotoForDisplay(t,{canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}),i=r):(r=this.getPhotoForDisplay(t),i=this.getPhotoForDisplay(t,{includeSizes:["sq","q","t","s","n"]})),this.setContainerWithTemplate("photo-well-media-scrappy",{width:r.width,height:r.height,src:i.url,highResSrc:r.url,showFuzzy:t.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1}),YUI.Env.isServer?(this.serverWidth=r.width,this.serverHeight=r.height):t.getValue("needsInterstitial")||this.preloadPhoto(t).then(function(){var t=e.get("container").one(".low-res-photo"),n=e.get("container").one(".main-photo");n&&n.removeClass("is-hidden").show(),t&&t.hide()}).catch(function(e){n.error("Error building slideshow",{err:e})}),this},preloadPhoto:function(t){var n=this;return new e.Promise(function(e,r){return n.generatePhotoElement(t,e,r)})},generateFuzzyElement:function(e){var t,n;return t=this.getPhotoForDisplay(e),n=document.createElement("span"),n.style.width=t.width+"px",n.style.height=t.height+"px",n},generatePhotoElement:function(t,n,r){var i,s;return i=this.getPhotoForDisplay(t),s=new Image,s.src=i.url,s.width=i.width,s.height=i.height,s.complete&&n&&typeof n=="function"&&n(t),s=e.one(s),n&&typeof n=="function"&&s.once("load",function(){n(t),s.detachAll(),s=undefined}),r&&typeof r=="function"&&s.once("error",function(){r(t),s.detachAll(),s=undefined}),s},handlePhotoLoaded:function(e){this.fire("subviewViewEvent","photoLoaded"),e.getValue("isOwner")||this.appContext.getViewCounter().queue(e.getValue("id"),this.appContext.getReferrer())},swapPhoto:function(t,n){var r,i,s;s=this.get("container").one(".restricted-image"),s&&(i=!0),t.getValue("needsInterstitial")?(r=this.generateFuzzyElement(t),r.className="main-photo outro restricted-image",r=e.one(r),s=this.get("container").one(".main-photo"),n||(s.once("transitionend",function(){s.detach(),s&&s.remove(!0),s=undefined}),s.removeClass("main-photo"),s.removeClass("intro"),s.addClass("outro"),r.removeClass("outro"),r.addClass("intro")),s.insert(r,"before"),n&&(r.removeClass("outro"),s.remove(!0)),this.fire("subviewViewEvent","photoLoaded")):(r=this.generatePhotoElement(t,this.handlePhotoLoaded.bind(this)),i||(s=this.get("container").one(".main-photo")),r.addClass("main-photo"),r.addClass("outro"),s&&s.removeClass("main-photo"),n?(r&&r.removeClass("outro"),s&&(s.insert(r,"before"),s.remove(!0))):(s&&(s.once("transitionend",function(){s.detachAll(),s&&s.remove(!0),s=undefined}),s.addClass("outro"),s.removeClass("intro"),s.insert(r,"before")),r&&(r.removeClass("outro"),r.addClass("intro"))))},onParentViewEvent:function(e,t){var n;if(t&&t[0]){n=t[0];switch(n){case"photoWellResized":this.get("photo").getValue("needsInterstitial")||this.buildContainer();break;case"slideshowView:newPhoto":t[1]&&(this.set("photo",t[1]),this.swapPhoto(t[1],t[2]));break;case"slideshowView:preloadPhoto":t[1]&&this.preloadPhoto(t[1]);break;default:}}},activate:function(){var t=this;return this.get("photo").getValue("needsInterstitial")||(this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.buildContainer()})),e.use("global-events",function(e){t.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){t.buildContainer()}))})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},getPhotoForDisplay:function(e,t){var n=this.getCanvasSize(),r=this.getPixelRatio(),i,s,o,u=!0;return t&&t.canvasSize&&(n=t.canvasSize),i=e.getSizeToFit(n,t),s=n.height/r,u||(s=Math.min(s,i.height)),o=Math.min(n.width/r,i.width/i.height*s),s=Math.min(s,i.height/i.width*o),{width:Math.round(o),height:Math.round(s),url:i.url,pixelRatio:i.width/o}},getCanvasSize:function(){var t,n=this.getPixelRatio(),s,o={width:r,height:i};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=e.one("#content"),s&&(t=s.get("region"),t.height=e.config.win.innerHeight,t.width=e.config.win.innerWidth)):t=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(o={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),t||(t={top:0,left:0,bottom:i,right:r,width:o.width,height:o.height}),t.height*=n,t.width*=n,t},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-well-media-scrappy"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-lang-photo-page-scrappy",function(e,t){e.Intl.add("hermes/photo-page-scrappy","en-US",{PAGE_TITLE:["${title}"," | Flickr - Photo Sharing!"],BACK_TO:["Back to ","${entryType}"],COULDNT_UPDATE_SETTINGS:["We couldn't update your settings"],ADULT_CONTENT:["Adult Content"],MATURE_AUDIENCES:["This content is for mature audiences only."],USER_DISCRETION:["User discretion is advised."],SHOW_ME_THIS_CONTENT_TYPE:["Show Me This Content Type From Now On"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['You can always change <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">SafeSearch settings</a> in your account preferences.'],SIGNED_IN_FOR_CONTENT:["You must be signed in to see this content."],VIDEO_COMING_SOON:["Video support coming soon"],FIND_OUT_MORE_AD:["Find out more at ","${brand}"],SHARE_THIS_PHOTO:["Share this photo"],DOWNLOAD_THIS_VIDEO:["Download this video"],DOWNLOAD_THIS_PHOTO:["Download this photo"],VIEW_ALL_SIZES:["View all sizes"],DOWNLOAD_PHOTO:["Download photo"],SOME_RIGHTS_RESERVED:["Some rights reserved"],DOWNLOAD:["Download"],ERROR_LOADING_CONTEXT:["Error loading context"],ADD_TITLE:["Add title"],ADD_DESCRIPTION:["Add description"],TITLE_DESCRIPTION_FAILURE:["We couldn't change the Title and Description at this time."],VIEW_PREVIOUS_COMMENT:["View previous comment"],VIEW_MORE_PREVIOUS_COMMENTS:["View ","${count}"," previous comments"],EMPTY_COMMENT_ERROR:["An empty comment box? That won't work!"],COMMENT_RATE_LIMIT_ERROR:["Slow down, partner! To protect the Flickr community against spam and spammy behavior we place a few restrictions on commenting."],COMMENT_POST_ERROR:["We couldn't post your comment."],MORE_COMMENTS_ERROR:["We couldn't get more comments."],COMMENT_PERMALINK_ERROR:["We were unable to find the specified comment on the photo."],DELETE_COMMENT:["Delete Comment"],COMMENT_DELETE_CONFIRMATION:["Are you sure you want to delete this comment?"],COMMENT_DELETE_ERROR:["We couldn't delete your comment."],COMMENT_LOADING_ERROR:["Error loading comments"],COMMENT:["Comment"],SHOW_MORE_COMMENTS:["${count}"," more"],REPLY:["Reply"],PERMALINK:["Permalink"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> faved this"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> and <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> faved this"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a>, and <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> faved this"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> and <a class="remaining-faved-by" href="#">',"${count}"," more people</a> faved this"],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],HIDE_EXIF:["Hide EXIF"],SHOW_EXIF:["Show EXIF"],EDIT_LOCATION:["Edit Location"],EDIT_LOCATION_ORGANIZR:["We\u2019re hard at work redesigning our brand new photo experience. For now, you can Edit Location in Organizr."],SAVE_LOCATION:["Save location"],APERTURE:["Aperture"],FOCAL_LENGTH:["Focal length"],EXPOSURE_TIME:["Exposure time"],FLASH_AUTO_FIRED:["Flash (auto, fired)"],FLASH_AUTO_NO_FIRE:["Flash (auto, did not fire)"],FLASH_ON_FIRED:["Flash (on, fired)"],FLASH_ON_NO_FIRE:["Flash (on, did not fire)"],FLASH_OFF:["Flash (off, did not fire)"],FLASH_SIMPLE_ON:["On"],FLASH_SIMPLE_OFF:["Off"],POWERED_BY:["POWERED BY"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Add this photo to your map"],SINGULAR_FAVE:["fave"],PLURAL_FAVE:["faves"],SINGULAR_VIEW:["view"],PLURAL_VIEW:["views"],SINGULAR_COMMENT:["comment"],PLURAL_COMMENT:["comments"],LICENSE_ERROR:["There was a problem changing your photo's license"],ALL_RIGHTS_RESERVED:["All rights reserved"],NO_RESTRICTIONS:["No known copyright restrictions"],PUBLIC_DOMAIN:["Public domain"],USA_GOV_WORK:["United States government work"],SAFETY_CHANGE_ERROR:["There was an error while changing your photo's safety level"],PRIVACY_CHANGE_ERROR:["There was a problem changing your photo's privacy"],COMMENT_PERM_CHANGE_ERROR:["There was an error while changing your photo's commenting permission"],FLAG_PHOTO:["Flag Photo"],MARK_FOR_REVIEW:["Mark for review"],ADDITIONAL_INFO:["Additional info"],VIEWING_THIS_PHOTO:["Viewing this photo"],PRIVACY_UPDATE_ERROR:["There was an error while updating the privacy. Please try again."],META_PERMS_UPDATE_ERROR:["There was an error while updating add meta permission. Please try again."],ADD_META_TO_THIS_PHOTO:["Add tags and people to this photo"],COMMENT_PERMS_UPDATE_ERROR:["There was an error while updating commenting permission. Please try again."],COMMENTING_ON_THIS_PHOTO:["Commenting on this photo"],SAFETY_UPDATE_ERROR:["There was an error while updating the safety level. Please try again."],SAFETY_LEVEL_OF_PHOTO:["Safety level of this photo"],FLAG_ERROR:["There was an error trying to flag this photo. Please try again."],PROVIDE_FEEDBACK:["Provide feedback on the new photo page"],ERROR_DELETING_AUTOTAG:["Error deleting Autotag"],AUTOTAGS:["Autotags"],CONTACT_LIST_ERROR:["An error occurred while trying to fetch your contact list. Please try again."],FAILED_TO_REMOVE_PERSON:["Failed to remove that person from the photo at this time."],PERSON_CANNOT_BE_TAGGED:["This person cannot be tagged."],PEOPLE_IN_PHOTO:["People in photo"],ADD_PEOPLE:["Add people"],ADD_PERSON:["Add a person"],ERROR_REMOVING_FROM_GROUP:["There was a problem removing this photo from the group"],ERROR_ACCEPTING_INVITATION:["There was a problem accepting the group invitation"
],SEARCH_GROUPS:["Search groups"],PHOTO_NOT_IN_GROUPS:["This photo is currently not in any groups"],ADD_TO_GROUP:["Add to group"],INVITE_TO_GROUP:["Invite to group"],ONE_GROUP_INVITATION:["You have 1 group invitation"],N_GROUP_INVITATIONS:["You have ","${count}"," group invitations"],VIEW_MORE_GROUPS:["View more groups"],ERROR_REMOVING_FROM_ALBUM:["There was a problem removing this photo from the album"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["You're about to remove the last photo from an album, which will also delete the album."],REMOVE_PHOTO_AND_ALBUM:["Remove photo and delete album"],ADD_PHOTO_TO_ALBUM:["Add this photo to an album"],SEARCH_ALBUMS:["Search albums"],ADD_TO_ALBUM:["Add to album"],PHOTO_NOT_IN_ALBUMS:["This photo is currently not in any albums"],VIEW_MORE_ALBUMS:["View more albums"],PHOTO_IN_ONE_ALBUM:["This photo is in 1 album"],PHOTO_IN_N_ALBUMS:["This photo is in ","${count}"," albums"],INVITE_PENDING:["Invite pending"],CANCEL_INVITE:["Cancel invite"],ACCEPT_INVITE:["Accept invite"],ONE_ITEM:["1 item"],N_ITEMS:["${count}"," items"],ERROR_REMOVING_FROM_GALLERY:["There was a problem removing this photo from the gallery"],SEARCH_GALLERIES:["Search galleries"],ADD_TO_GALLERY:["Add to gallery"],PHOTO_NOT_IN_GALLERIES:["This photo is currently not in any galleries"],VIEW_MORE_GALLERIES:["View more galleries"],PHOTO_IN_ONE_GALLERY:["This photo is in 1 gallery"],PHOTO_IN_N_GALLERIES:["This photo is in ","${count}"," galleries"],DELETE_PHOTO:["Delete Photo"],PERMANTENTLY_DELETE:["Do you want to permanently delete this photo?"],EDIT_PHOTO:["Edit photo"],NO_VIDEOS_IN_AVIARY:["Videos cannot be edited in Aviary"],ENHANCE_WITH_AVIARY:["Enhance with Aviary"],NO_VIDEO_ROTATION:["Videos cannot be rotated"],ROTATE:["Rotate"],NO_VIDEO_REPLACE:["Videos cannot be replaced"],REPLACE:["Replace"],PHOTO_NAVIGATION:["Photo navigation"],THUMBNAIL_NAVIGATION:["Thumbnail navigation"],ZOOM:["Zoom"],VIEW_IN_LIGHTBOX:["View in light box"],BACK_TO_CONTEXT:["Back to context"],ADD_TAG:["Add tag"],GO_TO_ORGANIZER:["Go to Organizr"],ALBUM:["album"],ALBUMS:["albums"],ERROR_LOADING_ALBUMS:["There was a problem loading your albums"],ERROR_ADDING_PHOTO_TO_ALBUM:["There was a problem adding this photo to the album"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["There was a problem removing this photo from the album"],ERROR_LOADING_GROUPS:["There was a problem loading the groups you can add photos to"],ERROR_ADDING_TO_GROUP:["There was a problem adding this photo to the group"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Sorry, the photo couldn't be added to the group because you don't own the photo."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Sorry, the photo couldn't be added to the group. You are not a member of the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["The photo is already in that group pool."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Sorry, the photo couldn't be added to the group because it is already in the maximum number of group pools."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Sorry, the photo couldn't be added to the group. You have already added the maximum number of photos to the pool."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Your photo has been added to the pending queue for the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Your photo is already in the pending queue for the group."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Sorry, the photo couldn't be added to the group. For more information, check the group requirements for media type, content type, safety level, and geo location."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Sorry, the photo couldn't be added to the group. The group has the maximum number of photos allowed in a pool."],ERROR_INVITING_TO_GROUP:["There was a problem inviting this photo to the group"],ERROR_CANCELING_GROUP_INVITIATON:["There was a problem canceling this photo's invitation to the group"],NO_MATCHES:["No matches"],CREATE_NEW:["Create new"],ERROR_LOADING_GROUP_INVITATIONS:["There was a problem loading this photo's group invitations"],NO_GROUP_INVITATIONS:["No pending group invitations"],PENDING_INVITATIONS_FOR_PHOTO:["Pending invitations for this photo"],LOADING_INVITATIONS:["Loading invitations"],ERROR_LOADING_GALLERIES:["There was a problem loading your galleries"],ERROR_ADDING_TO_GALLERY:["There was a problem adding this photo to the gallery"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["The owner of this photo does not allow the photo to be added to your gallery"],ERROR_CREATING_GALLERY:["There was a problem creating your new gallery"],DATE_TAKEN_FORMAT:["The taken date must be in the MM/DD/YYYY hh:mm:ss format."],DATE_POSTED_FUTURE:["The posted date cannot be in the future."],DATE_UPLOADED_FUTURE:["The uploaded date cannot be in the future."],DATE_POSTED_FLICKR_JOIN:["Posted date must be after you joined Flickr."],DATE_UPLOADED_FLICKR_JOIN:["Uploaded date must be after you joined Flickr."],ERROR_SAVING_DATE:["Error saving dates"],DATE_INVALID:["One or more dates are invalid"],EDIT_DATES:["Edit Dates"],DATE_TAKEN_ON:["Date Taken On"],DATE_POSTED_ON:["Date Posted On"],DATE_UPLOADED_ON:["Date Uploaded On"],TAKEN_CIRCA:["Taken circa ","${intlDate}"],TAKEN_SOMETIME_IN:["Taken sometime in ","${intlDate}"],TAKEN_IN:["Taken in ","${intlDate}"],TAKEN_ON:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Uploaded on ","${intlDate}"],SOMETHING_WENT_WRONG:["Something went wrong."],REFRESH_BROWSER:["Please refresh your browser and try again."],TWITTER_NOT_FOUND:["Twitter account not found on posting"],TUMBLR_NOT_FOUND:["Tumblr account not found on posting"],LINK:["Link"],LINK_TO_VIDEO:["Link to this video:"],LINK_TO_PHOTO:["Link to this photo:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Links are not available for restricted videos"],PRIVATE_VIDEO_SHARE:["This is a private video, do you still want to share it?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Links are not available for restricted photos"],PRIVATE_PHOTO_SHARE:["This is a private photo, do you still want to share it?"],SHARING_RESTRICTED_VIDEO:["Sharing is restricted for this video"
],SHARING_RESTRICTED_PHOTO:["Sharing is restricted for this photo"],EMBED:["Embed"],PUBLIC_TO_SHARE:["Please share this photo publicly to view embed code"],SIZE:["Size:"],TITLE_AND_OWNER_AT_START:["Display title and owner at start"],SHARE_NOW:["Share now!"],SHARE_PHOTO:["Share Photo"],SHARE_ON_TWITTER:["Share on Twitter"],AUTHORIZE_FOR_TWITTER:["please authorize Flickr to post on Twitter"],SHARE_ON_TUMBLR:["Share on Tumblr"],PUBLISH_NOW:["Publish now"],ADD_TO_QUEUE:["Add to queue"],SAVE_AS_DRAFT:["Save as draft"],AUTHORIZE_FOR_TUMBLR:["please authorize Flickr to post on Tumblr"],SHARE_VIA_MAIL:["Share via mail"],SCREEN_NAME_OR_EMAIL:["Screen name or email"],SQUARE:["Square"],SMALL:["Small"],MEDIUM:["Medium"],LARGE:["Large"],ORIGINAL:["Original"],DUPLICATE_TAG:["Duplicate Tag"],INVALID_TAG:["Invalid Tag"],MAXIMUM_TAG_LIMIT:["Maximum tag limit (76) reached"],MAX_TAG_LIMIT:["Maximum tag limit (75) reached"],ERROR_ADDING_TAG:["Error adding tag"],ERROR_DELETING_TAG:["Error deleting tag"],TAGS:["Tags"],ADD_TAGS:["Add tags"],ADD_A_TAG:["Add a tag"],PHOTO_IN_ONE_GROUP:["This photo is in 1 group"],PHOTO_IN_MANY_GROUPS:["This photo is in ",{type:"number",valueName:"count"}," groups"],PHOTO_IN_NO_GROUPS:["This photo is not in any groups"],ADD_A_COMMENT:["Add a comment"],COMMENT_TUTORIAL:["press Enter to post and Shift+Enter for newline"],SIGNED_IN_TO_POST_A_COMMENT:["You must be signed in to post a comment"],SHARE:["Share"],CODE:["Code"],INCLUDE_A_MESSAGE:["Include a message"],FOR_MORE_INFORMATION_SAFESEARCH:['For more information please read <a href="//www.flickr.com/help/photos/?search=flag#145">this FAQ</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],PRIVATE_PHOTO:["Private photo"],PHOTO_UNFIT_FOR_YOUR_EYES:["Photo is unfit for your eyes. Have a kitten: (^._.^)\uff89"],NO_PHOTO_WITH_THAT_ID:["No photo found with id ","${photoId}"],NO_MEMBERS_FOUND:["No members found"],TAKEN_ON_INTL:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Uploaded on ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Taken in ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["View in light box"],ZOOM_MAX_MESSAGE:["Whoa there, tiger! This photo is already at maximum size."],CLICK_TO_FAVE_PHOTO:["Click here to fave this photo"],CLICK_TO_FAVE_VIDEO:["Click here to fave this video"],BACK_TO_ACTIVITY_FEED:["Back to activity feed"],BACK_TO_PHOTOSTREAM:["Back to photostream"],BACK_TO_SHARED_PHOTOS:["Back to shared photos"],BACK_TO_ALBUM:["Back to album"],BACK_TO_CONTACTS_LIST:["Back to contacts list"],BACK_TO_FAVORITES:["Back to favorites"],BACK_TO_GALLERY:["Back to gallery"],BACK_TO_PROFILE:["Back to profile"],BACK_TO_EXPLORE:["Back to explore"],BACK_TO_COMMONS:["Back to commons"],BACK_TO_GROUP:["Back to group"],BACK_TO_GROUPS:["Back to groups"],BACK_TO_MAP:["Back to map"],BACK_TO_SEARCH:["Back to search"],BACK_TO_TAG:["Back to tag"],ERROR_ADDING_PHOTOS_TO_ALBUM:["There was a problem adding these photos to the album"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["There was a problem removing these photos from the album"],ERROR_CREATING_ALBUM:["There was a problem creating your new album"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Changing to a stricter privacy level"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["Changing a photo to a stricter privacy level will remove any favorites that have accumulated. It will also change the URL of the photo."],TAGS_HELPER_TEXT:["Tags are keywords that make photos easier to find. Add as many as you like, and Flickr\u2019s friendly robots will try to help out by adding some for you."],TAGS_HELP_TEXT:["Tags are keywords that make photos easier to find in Flickr search. The ones you add will show up in dark gray. Flickr\u2019s friendly robots will try to help out by adding some for you; these will appear with just a gray outline."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["This private tag is only visible to you and your friends and family who are allowed to see this photo."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["This private tag is only visible to you because you are a friend or family of the photo\u2019s owner."],CREATE_WALLART_WITH_PHOTO:["Create wall art with this photo"],ERROR_ROTATING_PHOTO:["There was a problem rotating this photo, please close and retry."],ROTATE_PHOTO:["Rotate photo"],ERROR_REPLACING_PHOTO:["There was a problem replacing this photo, please close and retry."],REPLACE_PHOTO:["Replace photo"],PERMANENTLY_REPLACE:['Permanently replace this photo ("',"${photoTitle}",'" by ',"${username}",") with <em>","${fileName}","</em>?"],REPLACE_WARNING:["Replacing a photo can't be undone. Choose a file to replace this photo with."],REPLACE_UPLOADING:["Uploading <em>","${fileName}"
,"</em>..."],ERROR_DELETING_PHOTO:["There was a problem deleting this photo, please close and retry."],SHOW_MORE_STATS:["Show more stats"],SIGNUP_AND_DOWNLOAD_TITLE:["You found a photo to download!"],SIGNUP_AND_DOWNLOAD_VIDEO_TITLE:["You found a video to download!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Join Flickr to access billions of photos."],SIGNUP_AND_COMMENT_TITLE:["Comment on this photo!"],SIGNUP_AND_COMMENT_MESSAGE:["Join Flickr to leave a comment on this photo."],IMMERSIFY:["Immersify"],SIGNUP_FOOTER_MESSAGE:["Join Flickr to explore world class photos"],TIMEOUT_FAILURE:["We're having some trouble displaying this photo at the moment. Please try again."],BUY:["Buy"]})},"@VERSION@",{requires:["intl"]});
YUI.add("slideshow-view",function(e,t){var n=require("lib/flog")(t);e.namespace("Views").Slideshow=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("isActiveViewAgnostic",!0),this.collection=e.collection,this.pageParams=e.pageParams||{perPage:20},this.pageParams.page=parseInt(e.pageNumber,10)||1,this.position=parseInt(e.position,10)||0;if(this.collection.totalItems<1)throw new Error("no items in collection");return this.get("container").getHTML()===""&&this.setContainerWithTemplate("flickr-balls"),this},subviewConfig:{"slideshow-attribution-view":{isActiveViewAgnostic:!0,requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["is-real-fullscreen","photo-attribution","chrome"]},"slideshow-well-view":{isActiveViewAgnostic:!0,requiredToShowOnClient:!1,requiredToShowOnServer:!1,dealbreaker:!0}},loadState:function(){var e=this;return this.collection.getPage(this.pageParams).then(function(){var t=e.collection.getList(),r,i,s,o;o=t[e.position];if(!o)throw new Error("The starting photo does not exist.");r=parseInt(e.collection.totalItems,10),e.bufferPhotos(e.position,e.get("bufferSize")),i=r-1,s=e.position-1,s<0&&(s=i);if(!t[s])return e.pageParams.page=Math.ceil(s/e.pageParams.perPage),e.collection.getPage(e.pageParams).then(function(){e.bufferPhotos(e.position,e.get("bufferSize"),"prev")}).catch(function(e){n.error("Error fetching next page in collection",{err:e})})}).catch(function(t){n.error("Error initializing slideshow",{err:t}),e.close()})},buildContainer:function(){var e;return this.subviews["slideshow-attribution-view"]&&(e=this.subviews["slideshow-attribution-view"].get("container")),this.setContainerWithTemplate("slideshow",{"slideshow-attribution-view":e,"photo-well-view":this.subviews["slideshow-well-view"].get("container")}),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},show:function(){var t=this,r=e.one("#content");return e.use("d3",function(){if(!r){n.error("Error initializing slideshow: missing content div");return}r.append(t.get("container")),t.get("enableFullscreen")&&(t.fullScreenManager=new e.fluid.Fullscreen,t.fullScreenManager.on("enterFullscreen",t.finishInitialization.bind(t)),t.fullScreenManager.enterFullscreen());try{t.initialize().then(function(){t.finishInitialization()}).catch(function(e){n.error("Error initializing slideshow",{err:e}),t.close()})}catch(i){n.error("Error initializing slideshow",{err:i}),t.close()}e.fire("flickr:setKeyEventScope",t.getKeyEventScope()),t.freeze()}),this},close:function(t){var n=this.get("container");e.fire("flickr:removeKeyEventScope",this.getKeyEventScope()),this.get("enableFullscreen")&&(this.fullScreenManager.exitFullscreen(),this.fullScreenManager.destroy()),n&&n.remove(!0),this.unfreeze(),this.fire("close",t),clearTimeout(this.mouseMoveTimer),clearTimeout(this.initialFadeTimer),clearTimeout(this.timer),clearTimeout(this.movingFadeTimer),this.destroy({remove:!0})},removeCircleTimer:function(){var t=e.d3.select(".timer > svg");t=t.remove()},drawCircleTimer:function(){var t,n,r,i=2,s=35,o=40,u={},a=this.get("autoplayInterval"),f=".timer",l=this.get("container").one(f),c;u.width=l.get("clientWidth"),u.height=l.get("clientHeight"),t=e.d3.svg.arc().innerRadius(s).outerRadius(o),n=e.d3.scale.linear().range([0,360]).domain([0,360]),r=e.d3.range(n(360)).map(function(e,t){return t*=i,{startAngle:t*(Math.PI/360),endAngle:(t+2)*(Math.PI/360)}}),c=e.d3.select(f).append("svg").attr("class","arc-timer").attr("width",u.width).attr("height",u.height).append("g").attr("transform","translate("+u.width/2+", "+u.height/2+")"),c.append("g").selectAll("path").data(r).enter().append("path").attr("fill",function(e){return"#fff"}).transition().delay(function(e,t){return t*a/r.length}).duration(a/r.length).ease("linear").attrTween("d",function(n){var r=e.d3.interpolate(n.startAngle,n.endAngle);return function(e){return n.endAngle=r(e),t(n)}})},getNextSafePhoto:function(e,t){var n,r,i;n=this.collection.getList(),r=parseInt(this.collection.totalItems,10),t=t||"next";if(t==="next"){e+=1;if(e===r){if(!this.collection.fetchedEnd)return;e=0}}else{e-=1;if(e===-1){if(!this.collection.fetchedEnd)return;e=r-1}}return i=n[e],i?e:e===this.position?-1:this.getNextSafePhoto(e,t)},handlePhotoChange:function(e,t){var r,i,s,o,u,a;r=this.collection.getList(),u=parseInt(this.collection.totalItems,10),s=u-1,e=e||"next",o=this.getNextSafePhoto(this.position,e),o>-1&&(this.position=o),e==="next"?(i=this.position+this.pageParams.perPage,i>s&&(i-=s)):(i=this.position-this.pageParams.perPage,i<0&&(i=s)),a=r[this.position],this.fire("parentViewEvent","slideshowView:newPhoto",a,t),r[i]||(this.pageParams.page=Math.ceil(i/this.pageParams.perPage),this.collection.getPage(this.pageParams).catch(function(e){n.error("Error fetching next page in collection",{err:e})})),this.bufferPhotos(this.position,this.get("bufferSize"),e)},bufferPhotos:function(e,t,n){var r,i,s;s=this.collection.getList(),i=parseInt(this.collection.totalItems,10),n=n||"next";if(t>0){n==="next"?(e+=1,e===i&&(e=0)):(e-=1,e<0&&(e=i-1)),r=s[e];if(r)return this.fire("parentViewEvent","slideshowView:preloadPhoto",r),t-=1,this.bufferPhotos(e,t,n)}return},handleKeys:function(t){var n=t.button;n===37||n===74?(e.rapidTracker.beacon(this.name,"keyboardLeft"),t.halt(),this.handleNavigation("prev",!0)):n===39||n===75||n===13?(e.rapidTracker.beacon(this.name,"keyboardRight"),t.halt(),this.handleNavigation("next",!0)):n===32?(e.rapidTracker.beacon(this.name,"keyboardPause"),t.halt(),this.handlePlayPause(this.get("container").one(".playpause"))):n===27?(e.rapidTracker.beacon(this.name,"keyboardEsc"),t.halt(),this.close()):t.halt()},handleNavigation:function(e,t){this.handlePhotoChange(e,t),clearTimeout(this.movingFadeTimer),this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"))},handlePlayPause:function(e){this.showChrome(),this.toggleAutoplay
()},handleClick:function(t){var n=t.target,r;n.hasClass("navigate-target")?(e.rapidTracker.beacon(this.name,"mouseNav"),t.halt(),r=n.getData("direction"),this.handleNavigation(r,!0)):n.hasClass("playpause")?(e.rapidTracker.beacon(this.name,"mousePlayPause"),t.halt(),this.handlePlayPause(n)):n.hasClass("close")&&(e.rapidTracker.beacon(this.name,"mouseClose"),t.halt(),this.close())},getKeyEventScope:function(){return this.name+this._yuid},cycle:function(){clearTimeout(this.timer),this.removeCircleTimer(),this.timer=setTimeout(this.handlePhotoChange.bind(this),this.get("autoplayInterval")),this.drawCircleTimer()},pauseAutoplay:function(){var t=this.get("container").one(".playpause");e.rapidTracker.beacon(this.name,"pauseAutoplay"),clearTimeout(this.timer),this.isPlaying=!1,this.removeCircleTimer(),t.removeClass("playing"),t.addClass("paused")},startAutoplay:function(){var t=this.get("container").one(".playpause");e.rapidTracker.beacon(this.name,"startAutoplay"),this.isPlaying=!0,this.cycle(),t.removeClass("paused"),t.addClass("playing")},toggleAutoplay:function(){this.isPlaying?this.pauseAutoplay():this.startAutoplay()},showChrome:function(){clearTimeout(this.movingFadeTimer),this.isShowingChrome=!0,this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer")),this.get("container").removeClass("idle")},handleMouseMove:function(e){var t;if(this.isShowingChrome){this.startPoint={x:e.pageX,y:e.pageY},clearTimeout(this.movingFadeTimer),this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"));return}this.startPoint?(clearTimeout(this.mouseMoveTimer),clearTimeout(this.initialFadeTimer),t=Math.round(Math.sqrt(Math.pow(this.startPoint.y-e.pageY,2)+Math.pow(this.startPoint.x-e.pageX,2))),t>this.get("chromeTriggerRadius")&&this.showChrome(),this.mouseMoveTimer=setTimeout(this.resetMouseDistance.bind(this),this.get("mouseIdleTimer"))):this.startPoint={x:e.pageX,y:e.pageY}},resetMouseDistance:function(){this.startPoint=null},handleMouseIdle:function(){var t;if(this.startPoint){t=e.one(document.elementFromPoint(this.startPoint.x,this.startPoint.y));if(t&&t.ancestor(function(e){return e.hasClass("chrome")},!0)){this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"));return}}this.hideChrome()},hideChrome:function(){this.resetMouseDistance(),this.get("container").addClass("idle"),this.isShowingChrome=!1,clearTimeout(this.movingFadeTimer)},onSubviewEvent:function(e,t){e==="slideshow-well-view"&&t[0]==="photoLoaded"?this.isPlaying&&this.cycle():e!=="slideshow-attribution-view"||t[0]!=="isOpen"&&t[0]!=="personMenuOpen"?e==="slideshow-attribution-view"&&(t[0]==="isClosed"||t[0]==="personMenuClose")&&(this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"))):(clearTimeout(this.movingFadeTimer),clearTimeout(this.initialFadeTimer),this.pauseAutoplay())},finishInitialization:function(){!this.finished&&this.get("enableFullscreen")&&this.fullScreenManager.isInFullscreenMode()?this.finished=!0:(this.get("autoplay")&&this.startAutoplay(),this.initialFadeTimer=setTimeout(this.hideChrome.bind(this),1500))},activate:function(){var t=this.get("container");return this.registerEventHandler(t.on("click",this.handleClick,this)),this.registerEventHandler(this.appContext.flapp.before("activeViewChange",this.close.bind(this))),this._params&&(this._params.keyEventScope=this.getKeyEventScope()),this.attachKeyEvent("down:8,13,27,32,37,74,39,75",e.betterThrottle(this.handleKeys.bind(this),100)),this.get("enableFullscreen")&&this.registerEventHandler(this.fullScreenManager.on("exitFullscreen",this.close.bind(this))),this.registerEventHandler(e.one("body").on("mousemove",e.betterThrottle(this.handleMouseMove.bind(this)))),this}},{ATTRS:{autoplay:{value:!0},autoplayInterval:{value:5e3},fadeTimer:{value:2e3},mouseIdleTimer:{value:200},chromeTriggerRadius:{value:30},bufferSize:{value:2},enableFullscreen:{value:!0}}})},"@VERSION@",{requires:["flickr-view","hermes-template-slideshow","slideshow-attribution-view","slideshow-well-view","slideshow-css","fluid-balls-css"],optionalRequires:["fluid-fullscreen"],langBundles:["common","photo-page-scrappy"]});
YUI.add("fluid-fullscreen",function(e){"use strict";function t(){this.fullscreenChangeHandler.detach(),this.webkitFullscreenChangeHandler.detach(),this.mozFullscreenChangeHandler.detach(),this.msFullscreenChangeHandler.detach()}function n(){this.isInFullscreenMode()?this.fire("enterFullscreen"):this.fire("exitFullscreen")}function r(){var t=e.config.doc;return t.fullscreenEnabled||t.webkitFullscreenEnabled||t.mozFullScreenEnabled||t.msFullscreenEnabled}function i(t){var n=e.config.doc,i=n.documentElement;t&&(i=t.getDOMNode());if(r()){if(i.requestFullscreen)return i.requestFullscreen();if(i.webkitRequestFullscreen)return i.webkitRequestFullscreen();if(i.mozRequestFullScreen)return i.mozRequestFullScreen();if(i.msRequestFullscreen)return i.msRequestFullscreen()}return!1}function s(){var t=e.config.doc;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement}function o(){var t=e.config.doc;if(s()){if(t.exitFullscreen)return t.exitFullscreen();if(t.webkitExitFullscreen)return t.webkitExitFullscreen();if(t.mozCancelFullScreen)return t.mozCancelFullScreen();if(t.msExitFullscreen)return t.msExitFullscreen()}return!1}e.mix(e.Node.DOM_EVENTS,{fullscreenchange:!0,webkitfullscreenchange:!0,mozfullscreenchange:!0,MSFullscreenChange:!0}),e.namespace("fluid").Fullscreen=function(){this.fullscreenChangeHandler=e.on("fullscreenchange",this.handleFullscreenChange.bind(this)),this.webkitFullscreenChangeHandler=e.on("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),this.mozFullscreenChangeHandler=e.on("mozfullscreenchange",this.handleFullscreenChange.bind(this)),this.msFullscreenChangeHandler=e.on("MSFullscreenChange",this.handleFullscreenChange.bind(this)),this.publish("enterFullscreen"),this.publish("exitFullscreen")},e.fluid.Fullscreen.prototype={isFullscreenCapable:r,isInFullscreenMode:s,enterFullscreen:i,exitFullscreen:o,handleFullscreenChange:n,destroy:t},e.augment(e.fluid.Fullscreen,e.EventTarget,!0,null,{prefix:"fullscreen"})},"@VERSION@",{requires:["event-custom"],optional:[],affinity:"client"});
YUI.add("fluid-magic-slideshow-view",function(e){e.namespace("Views")[this.name]=e.Base.create("fluid-magic-slideshow-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.modelParams=t.photoListConfig.modelParams,this.pageParams=t.pageParams,this.modelParams.fetchParams&&(this.pageParams=e.merge(this.modelParams.fetchParams,this.pageParams)),this.pageParams.viewPageSize?this.positionMultipler=this.pageParams.viewPageSize:this.positionMultipler=this.pageParams.perPage,this},loadState:function(){var e=this;return this.appContext.getModel(this.modelParams.registryName,this.modelParams.modelIdOrAttributes,this.modelParams.fetchParams).then(function(t){e.position=(e.pageParams.nominalPage-1)*e.positionMultipler||0,e.collection=t.getValue("photoPageList"),e.isEnabled=e.collection.totalItems>0}).catch(function(e){})},buildContainer:function(){return this.setContainerWithTemplate("fluid-magic-slideshow",{isEnabled:this.isEnabled}),this},toggleSlideshow:function(t){var n;e.rapidTracker.beacon(this.name,"launchSlideshow"),t.halt(),n=new e.Views.Slideshow({appContext:this.appContext,collection:this.collection,pageParams:this.pageParams,position:this.position}),n.show()},activate:function(){return this.isEnabled&&this.registerEventHandler(this.get("container").one(".slideshow-toggle").on("click",this.toggleSlideshow.bind(this))),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-magic-slideshow","fluid-magic-tools-css","slideshow-view"],langBundles:["common"]});
YUI.add("album-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.nsidOrPathAlias=e.nsidOrPathAlias,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.id,n=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===e.getValue("owner").id&&(n=!0),this.setContainerWithTemplate("album-toolbar",{nsidOrPathAlias:this.nsidOrPathAlias,viewerIsOwner:n,setId:t,isJustifiedLayout:this.albumPhotoListLayoutStyle==="justified",isStoryLayout:this.albumPhotoListLayoutStyle==="story"}),this},buildErrorContainer:function(){},activate:function(){var t=this.get("container"),n=this;return this.registerEventHandler(t.all(".layout").on("click",function(r){r.preventDefault();var i=r.target.getAttribute("data-layout");i!==n.layoutStyle&&(t.one(".selected").removeClass("selected"),r.target.addClass("selected"),e.fire("albumToolbarView:layoutChange",i),n.layoutStyle=i)})),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-toolbar","fluid-magic-slideshow-view","album-page-css"],optional:[],langBundles:["album-page"]});
YUI.add("hermes-lang-album-page",function(e,t){e.Intl.add("hermes/album-page","en-US",{PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} photo",other:"${#} photos"}}],VIDEOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} video",other:"${#} videos"}}],VIEWS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} view",other:"${#} views"}}],BACK_TO_ALBUMS:["Back to albums list"],EDIT_IN_ORGANIZR:["Edit in Organizr"],EDIT_COVER:["Edit cover"],SELECT_COVER_PHOTO:["Select a cover photo"],SELECT:["Select"],ERROR_COVER_PHOTO:["There was a problem trying to set your cover photo. Please try again."],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:["There was an error updating the album's title and description."],ALBUM_ADD_DESCRIPTION:["Click here to enter a description for this album"],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:["There was a problem creating the book for this album. Please try again later."],ALBUM_DESCRIPTION:["Album description"],CREATE_BOOK_FROM_ALBUM:["Make a book from this Album"],DOWNLOAD_PHOTOS_AND_VIDEO:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," & ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_PHOTOS:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}],DOWNLOAD_VIDEOS:["Download ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_ZIP:["Download zip"],DOWNLOAD_ZIP_PART:["Download zip part ","${partSequence}"],ALOT_OF_PHOTOS:["Wow, that's a lot of photos! Click to download each batch as a zip file."],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:["There are no photos or videos available in this album for you to download."],DOWNLOAD_ALBUM_DISABLED_ERROR:["Album downloading is currently unavailable. Please try again in a minute."],DOWNLOAD_ALBUM_GENERIC_ERROR:["There was an error downloading this album. Please try again."],DOWNLOAD_ALBUM_LICENSE_MESSAGE:["These photos may have one or more license types. Please visit the individual photo page for more information about the license prior to downloading this album."],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:["These photos may have one or more license types. Prior to downloading this album, please visit the individual photo pages to understand the designated license type for each image"],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:["These photos may have one or more license types or their rights may be reserved. Prior to downloading this album, please visit the individual photo pages to understand the designated license type for each image."],DOWNLOAD_ALBUM_LEARN_MORE:['Learn more at <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:["Do you really want to delete this album? (Don't worry, none of the contents will be deleted.)"],DELETE_THIS_ALBUM:["Delete this album"],SHARE_THIS_ALBUM:["Share this album"],CREATE_NEW_ALBUM:["Create new album"],SORT:["Sort"],SORT_DATE_TAKEN_OLDEST:["Sort by date taken (oldest first)"],SORT_DATE_TAKEN_NEWEST:["Sort by date taken (newest first)"],SORT_DATE_UPLOADED_OLDEST:["Sort by date uploaded (oldest first)"],SORT_DATE_UPLOADED_NEWEST:["Sort by date uploaded (newest first)"],SORT_ALPHABETICALLY:["Alphabetically"],SORT_RANDOMLY:["Randomly"],SORT_REVERSE:["Reverse current order"],SORT_ALMOST_DONE:["Almost done..."],TIMEOUT_FAILURE:["We're having some trouble displaying this album at the moment. Please try again."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-album-header",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'		<span class="edit-cover-photo" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"album-page.EDIT_COVER"},data:i}))+'">\n			<i></i>\n		</span>\n'+((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-change-album-sorting",{name:"isFlipped",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")},2:function(e,t,n,r,i){return'			<span class="change-album-sorting">\n				'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"album-page.SORT"},data:i}))+"<i></i>\n			</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="album-header-content" style="height: '+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+"px; background-image: url("+l((o=(o=n["cover-photo-url"]||(t!=null?t["cover-photo-url"]:t))!=null?o:a,typeof o===f?o.call(u,{name:"cover-photo-url",hash:{},data:i}):o))+');">\n\n	<div class="dimming-shim"></div>\n	<div class="flex-padding"></div>\n\n'+((s=n["if"].call(u,t!=null?t.viewerIsOwner:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-title-desc-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-stats-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-engagement-view"]:t,{name:"outlet",hash:{},data:i}))+'\n	<div class="flex-padding"></div>\n\n	'+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["attribution-view"]:t,{name:"outlet",hash:{},data:i}))+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-header",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-flickr-balls",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="balls">\n	<div class="blue ball"></div><div class="pink ball"></div>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/flickr-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-album-title-desc",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"editable"},3:function(e,t,n,r,i){return'		<span class="title-desc-edit" data-action="edit" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:i}))+'"></span>\n'},5:function(e,t,n,r,i){return"description-placeholder"},7:function(e,t,n,r,i){return"			"+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},t!=null?t.description:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},9:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:""},10:function(e,t,n,r,i){return"				"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"album-page.ALBUM_ADD_DESCRIPTION"},data:i}))+"\n"},12:function(e,t,n,r,i){return'	<button class="done-editing-album-title-desc hidden" data-action="saveAlbumTitleDescEdit">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<div class="title-desc-block '+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n	<div class="'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+' album-title">\n		'+f((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"title",hash:{},data:i}):o))+"\n	</div>\n\n"+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	<input type="text" class="meta-field edit-meta-field edit-album-title" wrap="on"></input>\n\n	<div class="'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+" album-desc "+((s=n.unless.call(u,t!=null?t.description:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(u,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'	</div>\n\n	<div class="description-show-more hidden">\n		<span class="description-show-more-link '+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-action="showMore">\n			'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SHOW_MORE"},data:i}))+'\n		</span>\n	</div>\n\n	<textarea class="meta-field edit-meta-field edit-album-desc" wrap="on"></textarea>\n</div>\n\n'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-title-desc",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-title-desc-view",function(e){var t={bigFont:"26px",smallFont:"18px",heightOfOneLineOfTextUsingBigFont:29,maxNumberOfLinesOfDescriptionToShow:2,maxNumberOfLinesOfDescriptionToShowJustified:1,maxNumberOfLinesOfDescriptionToShowInEditField:4,currentDescriptionEditableFieldHeight:29,heightOfOneLineOfTextWhenJustified:29};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},wrapDescription:function(e){var t;return e=e.split("\n"),t=e.length,t>1&&e.forEach(function(e,t,n){n[t]=e+"<br>"}),e.join("")},doneEditingTitleDescription:function(){var n=this,r=this.get("albumModel"),i,s,o=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),u=r.getValue("title").trim(),a=r.getValue("description").trim(),f=this.get("container"),l=f.one(".album-desc"),c=f.one(".album-title"),h=f.one(".edit-album-desc"),p=f.one(".edit-album-title"),d=f.one(".done-editing-album-title-desc");f.removeClass("editing"),i=p.get("value").trim(),i===""&&(i=u),h.get("value")!==o?s=h.get("value").trim():s="",d.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:doneEditing"),i!==u||s!==a?(r.setValue("title",i),r.setValue("description",s),e.rapidTracker.beacon(n.name,"albumTitleDescriptionSave"),r.remoteUpdate().then(function(){var e=r.getValue("title"),i=r.getValue("description");c.set("text",e),i.trim()!==""?(l.removeClass("description-placeholder"),i=n.wrapDescription(i),l.setHTML(i)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)},function(e){r.setValue("title",u),r.setValue("description",a),c.set("text",u),a.trim()!==""?(l.removeClass("description-placeholder"),l.setHTML(a)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),n.onError(n.intlMessage({intlName:"album-page.ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION"}))})):(p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),s.trim()===""?(l.addClass("description-placeholder"),l.setHTML(o)):(s=n.wrapDescription(s),l.removeClass("description-placeholder"),l.setHTML(s)),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)),f.hasClass("justified")&&t.currentDescriptionEditableFieldHeight!==t.heightOfOneLineOfTextWhenJustified&&(n.fire("subviewViewEvent","albumTitleDescEditing:heightChange",t.heightOfOneLineOfTextWhenJustified-t.currentDescriptionEditableFieldHeight),t.currentDescriptionEditableFieldHeight=t.heightOfOneLineOfTextWhenJustified)},editTitleDescription:function(t){var n=this,r=this.get("container"),i=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),s=r.one(".album-title"),o,u=r.one(".edit-album-desc"),a=r.one(".edit-album-title"),f=this.get("albumModel"),l=f.getValue("title"),c=f.getValue("description").trim(),h,p=r.one(".description-show-more"),d=r.one(".done-editing-album-title-desc");(t.target.hasClass("editable album-title")||t.target.hasClass("editable album-desc")||t.target.ancestor().hasClass("editable album-desc")||t.target.hasClass("title-desc-edit")||t.target.hasClass("description-show-more-link editable")||t.target.hasClass("title-desc-block editable"))&&t.target.get("tagName").toLowerCase()!=="a"&&(t.preventDefault(),t.stopPropagation(),r.addClass("editing"),p.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:editing"),d.removeClass("hidden"),o=s.getXY(),a.set("value",l),a.setStyle("height",s.get("offsetHeight")),a.setStyle("width",s.get("offsetWidth")),a.setStyle("left",o[0]),a.setStyle("top",o[1]),s.addClass("hidden"),a.addClass("show-editable"),c?(h=c.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<"),u.removeClass("description-placeholder")):(h=i,u.addClass("description-placeholder")),u.set("value",h),n.makeDescriptionEditFieldResponsive(),t.target.hasClass("editable album-title")?a.focus():u.focus(),e.rapidTracker.beacon(n.name,"albumTitleDescriptionEdit"))},makeDescriptionEditFieldResponsive:function(){var e=this,n=this.get("container"),r=n.one(".album-desc"),i,s,o,u,a=n.one(".edit-album-desc"),f=a.get("value"),l,c=!1;n.hasClass("justified")&&(c=!0),f?(f=f.replace(/"/g,"&quot;").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f=e.wrapDescription(f),r.addClass("calculating").removeClass("hidden"),r.setHTML(f),s=parseInt(r.getComputedStyle("height"),10),s>t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField?a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField):a.setStyle("height",s),c&&(l=parseInt(a.getComputedStyle("height"),10),l!==t.currentDescriptionEditableFieldHeight&&(i=l-t.currentDescriptionEditableFieldHeight,e.fire("subviewViewEvent","albumTitleDescEditing:heightChange",i),t.currentDescriptionEditableFieldHeight=l)),o=r.get("offsetWidth"),u=r.getXY(),a.setStyle("width",o),a.setStyle("left",u[0]),a.setStyle("top",u[1]),r.addClass("hidden").removeClass("calculating"),a.addClass("show-editable")):(a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont),r.addClass("hidden").removeClass("calculating"))},displayShowMoreIfNeeded
:function(e){var n=this.get("container"),r,i=n.one(".album-desc"),s=n.one(".title-desc-block"),o=n.one(".description-show-more");i&&(r=i.cloneNode(!0),r.removeClass("album-desc"),r.addClass("album-desc-calculator"),s.append(r),parseInt(r.getComputedStyle("height"),10)>t.heightOfOneLineOfTextUsingBigFont*e?o.removeClass("hidden"):o.addClass("hidden"),r.remove(!0))},showMoreClick:function(t){var n=this,r=this.get("albumModel"),i=r.getValue("description"),s=this.get("container").one(".description-show-more"),o;i=n.wrapDescription(i),t.target.hasClass("editable")?(s.addClass("hidden"),n.editTitleDescription(t)):(o=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"album-page.ALBUM_DESCRIPTION"}),message:i,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1,classList:"album-full-description"}),o.show())},buildContainer:function(){var e=this,t=this.get("albumModel"),n=t.getValue("title"),r=t.getValue("description"),i=t.getValue("isAutoUploadSet"),s=!1,o=!1,u=this.get("container");return r.trim()!==""&&(o=!0,this.albumPhotoListLayoutStyle==="justified"&&u.addClass("justified"),r=e.wrapDescription(r)),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===t.getValue("owner").id&&!i&&(s=!0),this.setContainerWithTemplate("album-title-desc",{title:n,description:r,hasDescription:o,canEdit:s}),this},buildErrorContainer:function(){},activate:function(){var n=this,r=this.get("albumModel"),i=this.get("container"),s=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),o=i.one(".title-desc-block"),u=i.one(".edit-album-title"),a=i.one(".edit-album-desc"),f=i.one(".title-desc-edit"),l=i.one(".description-show-more-link"),c=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===r.getValue("owner").id&&(c=!0),i.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),c&&!r.getValue("isAutoUploadSet")&&(n.registerEventHandler(o.on("click",function(e){n.editTitleDescription(e)},o)),n.registerEventHandler(f.on("click",function(e){n.editTitleDescription(e)},f))),n.registerEventHandler(l.on("click",function(e){n.showMoreClick(e)},l)),this.registerEventHandler(u.on("keyup",function(e){e.keyCode===13&&n.doneEditingTitleDescription()},this)),this.registerEventHandler(u.on("blur",function(t){setTimeout(function(){try{!e.config.doc.activeElement.isEqualNode(u.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-desc")&&n.doneEditingTitleDescription()}catch(t){}},1,u)},this)),this.registerEventHandler(a.on("keyup",function(e){n.makeDescriptionEditFieldResponsive()},this)),this.registerEventHandler(a.on("blur",function(t){a.get("value").trim()===""?(a.addClass("description-placeholder"),a.set("value",s)):a.removeClass("description-placeholder"),setTimeout(function(){try{!e.config.doc.activeElement.isEqualNode(a.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-title")&&n.doneEditingTitleDescription()}catch(t){}},1,a)},this)),this.registerEventHandler(a.on("focus",function(){a.get("value").trim()===s&&(a.removeClass("description-placeholder"),a.set("value",""))},this)),e.on("albumToolbarView:layoutChange",function(e){e==="justified"?(i.addClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified)):(i.removeClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow))}),this},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,darkOverlay:!0}),this.errorDialog.show(),this.errorDialog}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-title-desc","album-title-desc-css","handlebars-helpers"],optional:[],langBundles:["common","album-page"]});
YUI.add("hermes-template-album-stats",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'		<span class="photo-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:t!=null?t.photosArePresent:t,intlName:"album-page.PHOTOS_COUNT"},data:i}))+"</span>\n"},3:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.photosArePresent:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<span class="video-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{selectedCount:t!=null?t.videosArePresent:t,intlName:"album-page.VIDEOS_COUNT"},data:i}))+"</span>\n"},4:function(e,t,n,r,i){return'			<span class="album-stats-separator">&middot;</span>\n'},6:function(e,t,n,r,i){return'		<span class="album-stats-separator">&middot;</span>\n		<span class="view-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:t!=null?t.viewsArePresent:t,intlName:"album-page.VIEWS_COUNT"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="stats-container">\n'+((s=n["if"].call(o,t!=null?t.photosArePresent:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.videosArePresent:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.viewsArePresent:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-stats",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-stats-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.getValue("photoCount"),n=e.getValue("videoCount"),r=e.getValue("viewCount"),i=this.get("container");return this.albumPhotoListLayoutStyle==="justified"&&i.addClass("justified"),this.setContainerWithTemplate("album-stats",{photosArePresent:t,videosArePresent:n,viewsArePresent:r}),this},buildErrorContainer:function(){},activate:function(){return this},onParentViewEvent:function(e,t){var n=this,r=n.get("container");if(e==="album-stats-view"&&t[0]==="albumHeaderView:editing")return r.addClass("invisible"),!1;if(e==="album-stats-view"&&t[0]==="albumHeaderView:doneEditing")return r.removeClass("invisible"),!1}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-stats"],optional:[],langBundles:["common","album-page"]});
